---
# Feel free to add content and custom Front Matter to this file.
# To modify the layout, see https://jekyllrb.com/docs/themes/#overriding-theme-defaults

layout: single
classes: wide
title: Aquarium User Guide
permalink: /docs/how-to/aquarium
sidebar:
  nav: "docs"
---

本書はAquariumを利用したAI開発をスムーズに行う為に各機能や手順を説明する事を目的としています。

## 前提
読者がLinux、Git、Dockerの基本的な知識を持つことを前提としています。

* Dockerが初めての方はリンク先を選択してください。以下のリソースは、Dockerについて学ぶのに役立ちます。
    - [Dockerとはなにか](https://www.docker.com/why-docker)<i class="material-icons" class="material-icons blue">launch</i>
    - [コンテナとはなにか](https://www.docker.com/resources/what-container)<i class="material-icons" class="material-icons blue">launch</i>
    - [Docker公式チュートリアル](https://docs.docker.com/get-started/)<i class="material-icons" class="material-icons blue">launch</i>

## 概要

Aquariumの利用者は以下の操作を行えます。
* [ログイン](/docs/how-to/aquarium#ログイン)
* [ユーザ情報設定](/docs/how-to/aquarium#ユーザ情報設定)
* [ダッシュボード](/docs/how-to/aquarium#アクアリウムダッシュボード)
* [データセットを管理する](/docs/how-to/aquarium#データセット管理)
* [実験を実行する](/docs/how-to/aquarium#実験)
* [実験の結果を確認する](/docs/how-to/aquarium#実験確認)
* [テンプレートを管理する](/docs/how-to/aquarium#テンプレート管理)

## ログイン
Aquariumはブラウザから使用できます。
ブラウザで開始するには、Aquariumにログインします。
AquariumのURLが分からない場合はシステム管理者に問い合わせてください。

### ログイン
Aquariumにログインするにはログイン画面からユーザー名・パスワードを入力します。
ユーザー名・パスワードはシステム管理者から提供されます。

![ログイン](/assets/images/aquarium/login.png)

#### テナントについて

テナントはAquariumの最小の利用単位です。
テナント毎にリソースの使用量などが決められています。
ユーザは複数のテナントに所属することができます。

利用するテナントを切り替えるには、右上のユーザ名が表示されているリンクを押し、切り替えたいテナントを選択します。

![テナント切替](/assets/images/aquarium/tenant.png)

## ユーザ情報設定

利用者は右上のプルダウンメニューより[ユーザ情報設定]を選択することで、各種ユーザ設定情報の確認・変更が行えます。

### Gitトークンの設定

Aquariumでは学習に用いる学習スクリプトなどを、システム管理者によって設定されたGitリポジトリサービスから取得します。

Gitリポジトリサービスへのアクセスに認証が必要な場合、ユーザ情報設定画面にて [Git Token]タブを選択し、認証情報を設定します。

### レジストリトークンの設定

Aquariumでは、学習環境としてDockerコンテナを使用します。
このコンテナはシステム管理者によって設定されたDockerレジストリサービスから取得します。

Dockerレジストリサービスへのアクセスに認証が必要な場合、ユーザ情報設定画面にて [Registry Token]タブを選択し、認証情報を設定します。

## アクアリウムダッシュボード

ダッシュボードからは、Aquariumの各機能を実行することができます。

![ダッシュボード](/assets/images/aquarium/dashboard.png)

## データセット管理

データセット管理画面では、Aquariumの実験で使用するデータセットの作成、表示、更新を行います。

### データセット一覧

テンプレート一覧を表示するには、ダッシュボードまたはメニューから、データセットを選択します。
選択すると、作成済みデータセットの一覧が表示されます。

![データセット一覧](/assets/images/aquarium/dataset-list.png)

### データセット作成

データセットを作成するには、データセット一覧画面から「新しいデータセット」を選択します。

![データセット作成](/assets/images/aquarium/dataset-create.png)

|種類　|説明　|
|---|---|
|データセット名|データセットの名前。|
|画像|複数のファイルを登録できる。データ形式は任意。|

### データセット表示

データセットを表示するには、データセット一覧画面から表示するデータセットを選択します。

![データセット表示](/assets/images/aquarium/dataset-detail.png)

|種類　|説明　|
|---|---|
|データセットバージョン|表示・更新したいデータセットのバージョン|
|メモ|データセットの説明など補足情報。|
|ファイル一覧|データセットに含まれるファイルの一覧。画像ファイルの場合、ファイルを選択するとプレビューが表示される。|

### データセット更新

データセットを更新するには、データセット表示画面からアップロードを選択します。
続いて、データセットにファイルを追加する方法を選択します。

* パソコンから画像をアップロードする場合

![データセット更新1](/assets/images/aquarium/dataset-edit1.png)

|種類　|説明　|
|---|---|
|ファイル一覧|複数のファイルを追加できる。データ形式は任意。|
|アップロードメモ|データセットの説明など補足情報。|

* KAMONOHASHIからデータを選択する場合

![データセット更新2](/assets/images/aquarium/dataset-edit2.png)

|種類　|説明　|
|---|---|
|KAMONOHASHIからデータを選択|KAMONOHASHIに登録済みのデータを追加する。|
|アップロードメモ|データセットの説明など補足情報。|

### データセット削除

データセットを削除するには、データセット表示画面からデータセットバージョン削除またはデータセット削除を選択します。

|種類　|説明　|
|---|---|
|データセットバージョン削除|データセットの選択したバージョンを削除する。|
|データセット削除|このデータセット全体を削除する。|


## テンプレート管理

テンプレート管理画面では、Aquariumの実験で使用するテンプレートの作成、表示、更新を行います。

|種類　|説明　|
|---|---|
|ファイル一覧|データセットに追加するファイルの一覧。画像ファイルの場合、ファイルを選択するとプレビューが表示される。|
|アップロードメモ|データセットの説明など補足情報。|


### テンプレート一覧

テンプレート一覧を表示するには、ダッシュボードまたはメニューから、テンプレートを選択します。
選択すると、作成済みテンプレートの一覧が表示されます。

![テンプレート一覧](/assets/images/aquarium/template-list.png)

### テンプレート登録

テンプレートを登録するには、テンプレート一覧画面からモデルテンプレート登録を選択します。

![テンプレート登録1](/assets/images/aquarium/template-create1.png)

テンプレートの基本設定を登録します。

|種類　|説明　|
|---|---|
|テンプレート名|テンプレートの名前。|
|説明文|テンプレートの説明など補足情報。|
|公開設定|テンプレートを公開するテナント。現在のテナント:テンプレート登録者のカレントテナント。全テナントに公開:全てのテナント|

![テンプレート登録2](/assets/images/aquarium/template-create2.png)

前処理を登録します。前処理のないテンプレートでは空にします。

|種類|説明|
|---|---|
|前処理コンテナイメージ|前処理で利用するDockerレジストリ、コンテナ、タグ、アクセストークンを指定する。|
|スクリプト|前処理で利用するソースコードを格納しているGitサーバ、リポジトリ、ブランチ、コミットID、アクセストークンを指定する。コミットIDを指定した場合はブランチの入力値は無視される。コミットIDが未指定の場合はブランチのHEADが選択される。ブランチもコミットIDも未指定の場合は、masterブランチのHEADが選択される。|
|実行コマンド|前処理で実行するコマンドを指定する。コンテナイメージに設定されたcommand, entrypointは無効になり、このコマンドのみが実行される|
|CPU・メモリ・GPU|前処理で利用するコンテナに割り当てるリソース量を指定する。|

![テンプレート登録3](/assets/images/aquarium/template-create3.png)

学習を登録します。

|種類|説明|
|---|---|
|学習コンテナイメージ|学習で利用するDockerレジストリ、コンテナ、タグ、アクセストークンを指定する。|
|スクリプト|学習で利用するソースコードを格納しているGitサーバ、リポジトリ、ブランチ、コミットID、アクセストークンを指定する。コミットIDを指定した場合はブランチの入力値は無視される。コミットIDが未指定の場合はブランチのHEADが選択される。ブランチもコミットIDも未指定の場合は、masterブランチのHEADが選択される。|
|実行コマンド|学習で実行するコマンドを指定する。コンテナイメージに設定されたcommand, entrypointは無効になり、このコマンドのみが実行される|
|CPU・メモリ・GPU|学習で利用するコンテナに割り当てるリソース量を指定する。|

### テンプレート更新

テンプレートを更新するには、テンプレート一覧画面から更新するテンプレート登録を選択します。

![テンプレート更新1](/assets/images/aquarium/template-edit1.png)
![テンプレート更新2](/assets/images/aquarium/template-edit2.png)
![テンプレート更新3](/assets/images/aquarium/template-edit3.png)

入力内容はテンプレート登録と同じです。
